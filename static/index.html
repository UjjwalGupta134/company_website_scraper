<!DOCTYPE html>
<html>
<head>
  <title>Company Website Scraper</title>
  <style>
    body { font-family: Arial; background:#f4f4f4; padding:40px; }
    .box { max-width:700px; margin:auto; background:#fff; padding:20px; border-radius:6px; }
    input { width:100%; padding:10px; margin-bottom:10px; }
    button { padding:10px 20px; }
    pre { background:#111; color:#0f0; padding:15px; }
    #result h2 { margin-top: 0; }
    #result ul { padding-left: 20px; }
    #result a { color: #0066cc; }
  </style>
</head>
<body>
  <div class="box">
    <h2>Company Website Scraper</h2>
    <input id="url" placeholder="Enter company website URL" />
    <button onclick="scrape()">Scrape</button>
    <div id="result"></div>
  </div>

<script>
async function scrape() {
  let url = document.getElementById("url").value.trim();
  const result = document.getElementById("result");

  if (!url) {
    result.innerHTML = "<p>Please enter a URL.</p>";
    return;
  }

  if (!url.startsWith("http")) {
    url = "https://" + url;
  }

  result.innerHTML = "<p>Scraping...</p>";

  try {
    const r = await fetch("/scrape", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ website: url })
    });

    const data = await r.json();

    result.innerHTML = `
      <h2>${data.company_name || "Unknown Company"}</h2>

      <p>
        <strong>Website:</strong>
        <a href="${data.website}" target="_blank">${data.website}</a>
      </p>

      <h3>What they do</h3>
      <p>${data.what_they_do || "Not found"}</p>

      <h3>Offerings</h3>
      <ul>
        ${(data.offerings || []).map(item => `<li>${item}</li>`).join("")}
      </ul>

      <h3>Links</h3>
      ${data.contact_page ? `<a href="${data.contact_page}" target="_blank">Contact</a>` : ""}
      ${data.careers_page ? ` | <a href="${data.careers_page}" target="_blank">Careers</a>` : ""}
    `;
  } catch (err) {
    result.innerHTML = "<p>Error fetching data.</p>";
  }
}
</script>
</body>
</html>

